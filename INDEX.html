    .score { font-size: 28px; font-weight: bold; margin: 16px 0; }
  </style>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <div class="container" id="app"></div>

  <script>
    let step = 1;
    let score = 0;

    const app = document.getElementById('app');

    const questions = [
      {
        text: "‡∏ä‡πà‡∏ß‡∏á 7 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤ ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÑ‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà",
        options: [
          { label: "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£", point: 0 },
          { label: "‡πÑ‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢", point: 1 },
          { label: "‡πÑ‡∏≠‡∏ö‡πà‡∏≠‡∏¢ / ‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á", point: 2 }
        ]
      },
      {
        text: "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÄ‡∏™‡∏°‡∏´‡∏∞‡∏£‡πà‡∏ß‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà",
        options: [
          { label: "‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏™‡∏°‡∏´‡∏∞", point: 0 },
          { label: "‡∏°‡∏µ‡πÄ‡∏™‡∏°‡∏´‡∏∞", point: 1 }
        ]
      },
      {
        text: "‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÅ‡∏ô‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà",
        options: [
          { label: "‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏¢", point: 0 },
          { label: "‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢", point: 1 },
          { label: "‡∏ö‡πà‡∏≠‡∏¢ / ‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á", point: 2 }
        ]
      },
      {
        text: "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏≠‡∏ö‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏Ç‡∏ì‡∏∞‡∏ó‡∏≥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà",
        options: [
          { label: "‡πÑ‡∏°‡πà‡∏°‡∏µ", point: 0 },
          { label: "‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á", point: 1 },
          { label: "‡∏ö‡πà‡∏≠‡∏¢", point: 2 }
        ]
      },
      {
        text: "‡∏Ñ‡∏∏‡∏ì‡∏™‡∏π‡∏ö‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏ß‡∏±‡∏ô‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà",
        options: [
          { label: "‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏¢", point: 0 },
          { label: "‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á", point: 1 },
          { label: "‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥", point: 2 }
        ]
      }
    ];

    async function render() {
      if (window.liff && !liff.isInitialized()) {
        await liff.init({ liffId: '2008918068' });
      }
      app.innerHTML = '';

      if (step <= questions.length) {
        const q = questions[step - 1];

        const title = document.createElement('h1');
        title.textContent = 'ü´Å ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏õ‡∏≠‡∏î';

        const progressWrap = document.createElement('div');
        progressWrap.style.margin = '12px 0 20px 0';

        const progressBg = document.createElement('div');
        progressBg.style.height = '8px';
        progressBg.style.background = '#eef1f7';
        progressBg.style.borderRadius = '999px';
        progressBg.style.overflow = 'hidden';

        const progressBar = document.createElement('div');
        progressBar.style.height = '100%';
        progressBar.style.width = Math.round((step - 1) / questions.length * 100) + '%';
        progressBar.style.background = 'linear-gradient(90deg,#74b9ff,#0984e3)';

        progressBg.appendChild(progressBar);
        progressWrap.appendChild(progressBg);

        const stepText = document.createElement('div');
        stepText.className = 'step';
        stepText.textContent = `‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${step} ‡∏à‡∏≤‡∏Å ${questions.length}`;

        const questionText = document.createElement('div');
        questionText.className = 'question';
        questionText.textContent = q.text;

        app.appendChild(title);
        app.appendChild(progressWrap);
        app.appendChild(stepText);
        app.appendChild(questionText);

        q.options.forEach(option => {
          const btn = document.createElement('button');
          btn.className = 'btn';
          btn.textContent = option.label;
          btn.addEventListener('click', () => answer(option.point));
          app.appendChild(btn);
        });

      } else {
        let level = '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≥';
        if (score >= 4) level = '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';
        if (score >= 7) level = '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á';

        const result = document.createElement('div');
        result.className = 'result';
        result.innerHTML = `
          <h1>üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h1>
          <div class="score">${level}</div>
          <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${score}</p>
          <p style="font-size:14px;color:#666">* ‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå</p>
          <button class="btn" id="sendLine">‡∏™‡πà‡∏á‡∏ú‡∏•‡πÑ‡∏õ‡∏ó‡∏µ‡πà LINE</button>
        `;
        app.appendChild(result);

        document.getElementById('sendLine').addEventListener('click', () => {
          if (!window.liff || !liff.isInClient()) return alert('‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô LINE ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô');

          const flex = {
            type: 'flex',
            altText: '‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏õ‡∏≠‡∏î',
            contents: {
              type: 'bubble',
              body: {
                type: 'box',
                layout: 'vertical',
                contents: [
                  { type: 'text', text: 'ü´Å ‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏õ‡∏≠‡∏î', weight: 'bold', size: 'lg' },
                  { type: 'text', text: level, size: 'xl', margin: 'md', color: '#0984e3' },
                  { type: 'text', text: `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${score}`, margin: 'md' }
                ]
              }
            }
          };

          liff.sendMessages([flex]).then(() => liff.closeWindow());
        });
      }
    }

    function answer(point) {
      score += point;
      step++;
      render();
    }

    render();
  </script>
</body>
</html>
